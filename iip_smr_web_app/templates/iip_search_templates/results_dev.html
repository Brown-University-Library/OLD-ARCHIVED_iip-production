{% extends 'common/base.twig' %}
{% load staticfiles %}
{% load iipCustomFilters %}


{% block queryCapture %}
	{% autoescape off %}
    <script type="text/javascript">
        var qstring = '{{ qstring|escapejs }}';
        var resultsPage = '{{ resultsPage|escapejs }}';
    </script>
    <script type="text/javascript">
        function ImgError(source){
            source.src = "{% static "/resources/img/noimg.png" %}";
            source.onerror = "";
            return true;
        }
    </script>
    {% endautoescape %}
{% endblock %}


{% block extra_css %}

    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">

    <link href='{% static "iip_search_app/css/general2.css" %}' media="all" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" type="text/css" href='{% static "iip_search_app/css/tei_custom_elements.css" %}'/>
    <link href='https://api.mapbox.com/mapbox-gl-js/v0.38.0/mapbox-gl.css' rel='stylesheet' />
      <link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.3/dist/leaflet.css"
      integrity="sha512-07I2e+7D8p6he1SIM+1twR5TIrhUQn9+I6yjqD53JQjFiMf8EtC93ty0/5vJTZGF8aAocvHYNEDJajGdNx1IsQ=="
      crossorigin=""/>
      <link href='https://api.mapbox.com/mapbox-gl-js/v0.38.0/mapbox-gl.css' rel='stylesheet' />

    <style>

    hr.style-one {
        border: 0;
        height: 1px;
        background: #333;
        background-image: linear-gradient(to right, #ccc, #333, #ccc);
    }
    </style>

{% endblock %}


{% block content %}

    <div class="">

        <div id="" class="pl-80 pt-32 pb-32 pr-8 w-screen overflow-hidden">

            <div class=''>

                {% autoescape off %}

                <!-- <span class="search_results_header">Your search for {{dispQstring}} yielded {{pages.count}} results</span> -->
								<div class="flex items-end justify-between">
	                <h1 class="font-serif text-3xl ">{{ results_count }} inscription{{ results_count|pluralize }}</h1>
									<!--a href="/TODO-guide-to-searching-link" class="uppercase font-sans text-sm text-theme-700 underline hover:no-underline">
										Guide to Searching
									</a-->
								</div>

								<div class="flex items-end justify-between mb-2">
	                <h2 class="">{{dispQstring}}</h2>
									<div class="flex justify-end items-center">
										<div class="flex justify-start items-center">
											<label class="uppercase font-sans_bold text-xs text-theme-700 mr-2 pt-2">
												Sort
											</label>
											<select class="font-sans text-sm bg-transparent border-none w-20 text-gray-600 underline hover:no-underline mr-2">
												<option>Title</option>
											</select>
										</div>
										<a href="/mapsearch/?q=*">
											<i class="mdi mdi-view-grid-outline text-theme-500 text-lg mr-2" ></i>
										</a>
										<a href="/mapsearch/?q=*">
											<i class="mdi mdi-view-list text-theme-700 text-lg" ></i>
										</a>
									</div>
								</div>



                {% if iipResult %}

                <div id="search_results" class="border-t border-theme-200 border-solid pt-8 mt-4 pb-16">

                    <script type="text/javascript">
                        window.inscription_list = [];
                    </script>

                    <!--
                    <script type="text/javascript">
                        inscription_list.push("{{inscription.inscription_id}}");
                    </script>
                    -->

                    <div class="flex flex-col w-full">
											<div class="flex flex-center justify-start w-full">
												<label class="uppercase font-sans_bold text-xs text-gray-600 w-1/6">
												</label>
												<label class="uppercase font-sans_bold text-xs text-gray-600 w-1/6">
													Title
												</label>
												<label class="uppercase font-sans_bold text-xs text-gray-600 w-1/6">
													Language
												</label>
												<label class="uppercase font-sans_bold text-xs text-gray-600 w-1/6">
													Date
												</label>
												<label class="uppercase font-sans_bold text-xs text-gray-600 w-1/6">
													Transcription
												</label>
												<label class="uppercase font-sans_bold text-xs text-gray-600 w-1/6">
													Translation
												</label>
											</div>

                    {% for inscription in iipResult %}
											{% include 'common/tease-inscription.twig' %}
                    {% endfor %}
                    </div>

                </div>

                {% endif %} {# end of ```{% if iipResult %}``` #}

                {% if iipResult %}

                <div class="page_list">
                    Results pages:
                    {% for pg in pages %}
                    <a href='./?q={{ initial_qstring|urlencode }}&resultsPage={{pg}}' {%ifequal pg resultsPage%}style="font-size: 1.3em"{%endifequal%}>{{pg}}</a>&nbsp;
                    {% endfor %}
                </div>

                {% endif %}

                <script src="https://code.jquery.com/jquery-1.12.1.min.js"></script>
                <script src='https://api.mapbox.com/mapbox-gl-js/v0.38.0/mapbox-gl.js'></script>
                <script src="https://unpkg.com/leaflet@1.0.3/dist/leaflet.js"
                    integrity="sha512-A7vV8IFfih/D732iSSKi20u/ooOfj/AGehOKq0f4vLT1Zr2Y+RX7C+w8A1gaSasGtRUZpF/NZgzSAu4/Gc41Lg=="
                    crossorigin="">
                </script>

                <script type="text/javascript"> var API_URL = "{% url 'api_wrapper' %}"; </script>  <!-- used by maplet.js -->
                <script type="text/javascript" src='{% static "iip_search_app/js/maplet.js" %}'></script>

                {% endautoescape %}

            </div>  <!-- end <div class=''> -->


            {% block facets %}

            {% endblock %}


        </div>  <!-- end of <div id="paginated_results"> -->

    </div>  <!-- end of <div class="container story-wrapper"> -->

{% include 'common/search_sidebar.twig' %}


    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script src='{% static "iip_search_app/js/jquery.livequery.js" %}' type="text/javascript"></script>
    <script src='{% static "iip_search_app/js/CETEI.js" %}' type="text/javascript"></script>
    <script type="text/javascript" src='{% static "iip_search_app/js/zotero.js" %}'></script>
    <script type="text/javascript" src='{% static "iip_search_app/highslide/highslide-with-gallery.packed.js" %}'></script>
    <script type="text/javascript">
      hs.graphicsDir = '{% static "iip_search_app/highslide/graphics/" %}'
    </script>

    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-3203647-22', 'auto');
        ga('send', 'pageview');

    </script>
    <script type="text/javascript" src='{% static "iip_search_app/js/result_display.js" %}'></script>

		<!-- must include mapsearch for search tools to function properly -->
		<div style="display:none">
			{% include 'mapsearch/_mapsearch_content.html' %}
			<!-- placeholder maplet -->
			<div id="maplet" ></div>
		</div>


{% endblock %} {# end of `content` block #}
{% block 'footer' %}
{% endblock %}



{% block extra_js %}

<!-- 	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.js"></script> -->
<script src="https://code.jquery.com/jquery-1.12.1.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script src='https://api.mapbox.com/mapbox-gl-js/v0.38.0/mapbox-gl.js'></script>
<script src="https://unpkg.com/leaflet@1.0.3/dist/leaflet.js" integrity="sha512-A7vV8IFfih/D732iSSKi20u/ooOfj/AGehOKq0f4vLT1Zr2Y+RX7C+w8A1gaSasGtRUZpF/NZgzSAu4/Gc41Lg==" crossorigin=""></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-switch/3.3.4/js/bootstrap-switch.min.js"></script>

{% load staticfiles %}
<script type="text/javascript">
	var API_URL = "{% url 'api_wrapper' %}";
</script> <!-- used by mapsearch.js -->
<script src='{% static 'mapsearch/js/mapsearch.js' %}'></script>
<script src='{% static 'mapsearch/js/jquery.livequery.js' %}'></script>
<script src='{% static 'mapsearch/highslide/highslide-with-gallery.packed.js' %}'></script>



<script type="text/javascript">
	hs.graphicsDir = '{% static "iip_search_app/highslide/graphics/" %}'
</script>
<script>
	(function(i, s, o, g, r, a, m) {
		i['GoogleAnalyticsObject'] = r;
		i[r] = i[r] || function() {
			(i[r].q = i[r].q || []).push(arguments)
		}, i[r].l = 1 * new Date();
		a = s.createElement(o),
			m = s.getElementsByTagName(o)[0];
		a.async = 1;
		a.src = g;
		m.parentNode.insertBefore(a, m)
	})(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');
	ga('create', 'UA-3203647-22', 'auto');
	ga('send', 'pageview');
</script>
{% endblock %}
